- name: coping {{COMPONENT}} repo file
  ansible.builtin.copy:
     src: mysql.repo
     dest: /etc/yum.repos.d/mongodb.repo

- name: installing {{COMPONENT}}
  ansible.builtin.yum:
     name: 
       - mysql-community-server 
       - MySQL-python
     state: present

     
- name: Starting the {{COMPONENT}}  service
  ansible.builtin.service:
    name: mysqld
    state: started
    enabled: yes

- name: Check the {{COMPONENT}} password by fetching from the logs
  community.mysql.mysql_info:
    login_user: root
    login_password: RoboShop@1
  ignore_errors: yes
  register: mysql_stat

- name: Reset password
  ansible.builtin.shell: grep "temporary" /var/log/mysqld.log | head -n 1 | awk -F " " '{print $NF}'
  register: DEFAULT_ROOT_PASSWORD
  when: mysql_stat.failed


  
